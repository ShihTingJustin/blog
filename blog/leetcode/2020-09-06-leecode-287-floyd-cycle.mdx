---
slug: 2020-09-06-leecode-287-floyd-cycle
title: "[Leetcode with JavaScript] åˆ·é¡Œç­†è¨˜â€Šâ€”â€Šç‰¹æ®Šæ–¹æ³• Floyd's Cycle Detection"
authors: [shihting]
image: https://i.imgur.com/k16HQ1G.png
tags:
  [
    softwareEngineer,
    leetcode,
    leetcode287,
    leetcode141,
    leetcode142,
    bruteForce,
    hashMap,
    twoPointers,
  ]
---

<MDXImg
  src="https://i.imgur.com/k16HQ1G.png"
  source="https://1algo1week.warriorkitty.com/algorithm/2017/06/11/floyds-cycle-finding-algorithm.html"
/>

### å‰è¨€

é€™æ˜¯æœ€è¿‘åˆ· Leetcode å­¸ç¿’åˆ°çš„ç‰¹æ®Šæ–¹æ³•ï¼Œé©åˆæ‹¿ä¾†è§£å°‹æ‰¾é‡è¤‡æ•¸å­—çš„é¡Œç›®ï¼Œ å¦‚ Array é¡Œå‹ **287. Find the Duplicate Number**ï¼Œé‚„èƒ½è§£ç­” Linked List ç›¸é—œé¡Œå‹å¦‚ **141. Linked List Cycleã€142. Linked List Cycle II**ï¼Œè¦ºå¾—ç›¸ç•¶å¯¦ç”¨ï¼Œå› æ­¤æ±ºå®šå¯«æˆç­†è¨˜ï¼Œå…§å®¹è‘—é‡æ–¼æ‡‰ç”¨åœ¨åˆ·é¡Œï¼Œè‹¥æƒ³ç´°ç©¶åŸç†çš„è®€è€…å¯ä»¥åƒè€ƒåº•ä¸‹çš„ Reference #4 #5ã€‚

<!--truncate-->

### Floydâ€™s Cycle Detection

æœ‰ç™¼ç¾å°é¢åœ–ç‰‡ä¸Šå‡ºç¾äº†çƒé¾œèˆ‡å…”å­å—ï¼Ÿå› ç‚ºé€™å€‹æ¼”ç®—æ³•ä¿—ç¨±é¾œå…”è³½è·‘æ¼”ç®—æ³•ã€‚ä»¥ä¸‹æ˜¯åŸç†åŠçµè«–ï¼š

1. å‡è¨­æ•¸åˆ—æ˜¯ä¸€å€‹è³½é“ï¼Œé¾œå…”ä¸€èµ·å‡ºç™¼ï¼Œå…”å­è·‘å¾—æ¯”çƒé¾œå¿«ï¼Œå¦‚æœé€™å€‹è³½é“ä¸­æ²’æœ‰ç’°(cycle)å­˜åœ¨ï¼Œåœ¨é¾œå…”é€Ÿåº¦ä¸è®Šçš„æƒ…æ³ä¸‹ï¼Œçƒé¾œæ°¸é ä¸æœƒèˆ‡å…”å­ç›¸é‡ï¼›ä½†**\*åªè¦è³½é“ä¸­æœ‰ç’°ï¼Œé‚£é¾œå…”ä¸€å®šæœƒåœ¨æŸä¸€é»ç›¸é‡\*** (å¯åƒè€ƒ Reference #1)
2. é¾œå…”ç›¸é‡å¾Œï¼Œå¯è—‰ç”±å°‡çƒé¾œé€€å›èµ·é»ï¼Œå…”å­åœ¨åŸåœ°ä¸å‹•ï¼Œæ­¤æ™‚é¾œå…”ä¹‹é–“çš„è·é›¢ï¼Œæœƒæ˜¯ç’°çš„æ•´æ•¸å€ï¼Œç„¶å¾Œè®“é¾œå…”æ¯æ¬¡åªå‹•ä¸€æ ¼ï¼Œå…©è€…äº¤æœƒæ™‚å°±æœƒæ˜¯ç’°çš„èµ·é»ã€‚

é¾œå…”å…©å€‹åœ¨æ•¸åˆ—è£¡è·‘ï¼Œè½èµ·ä¾†å¥½åƒæœ‰é»ç†Ÿæ‚‰ï¼Œæ²’éŒ¯ï¼Œé€™å€‹æ¦‚å¿µå’Œæˆ‘åœ¨[ä¸Šä¸€ç¯‡åˆ·é¡Œç­†è¨˜](https://medium.com/@mercedes722s/leetcode-with-javascript-åˆ·é¡Œç­†è¨˜-ç¬¬ä¸€é¡Œ-two-sum-å°±å­¸æœƒä¸‰ç¨®-approach-59ae63cebe29)ä¸­æ‰€ä»‹ç´¹çš„é›™æŒ‡é‡ Two Pointers æ–¹æ³•å¾ˆåƒï¼Œåªæ˜¯æŒ‡é‡ä¸€å€‹å¿«ä¸€å€‹æ…¢ï¼Œå› æ­¤åˆç¨±ç‚ºã€Œ**å¿«æ…¢æŒ‡é‡ã€ã€‚**

æ¥ä¸‹ä¾†ç›´æ¥çœ‹é¡Œç›®å¯¦ä½œå§ï¼

### 287. Find the Duplicate Number

> Given an array of integers `nums` containing `n + 1` integers where each integer is in the range `[1, n]` inclusive.

> There is only **one duplicate number** in `nums`, return _this duplicate number_.

**Follow-ups:**

1. How can we prove that at least one duplicate number must exist in `nums`?
2. Can you solve the problem **without** modifying the array `nums`?
3. Can you solve the problem using only constant, `O(1)` extra space?
4. Can you solve the problem with runtime complexity less than `O(n2)`?

**Example 1:**

```
Input: nums = [1,3,4,2,2]
Output: 2
```

**Example 2:**

```
Input: nums = [3,1,3,4,2]
Output: 3
```

é¡Œç›®è¦æ±‚æ˜¯æ‰¾å‡ºé™£åˆ—ä¸­é‡è¤‡çš„æ•¸å­—ç„¶å¾Œå›å‚³ï¼Œè½èµ·ä¾†å¥½åƒä¸é›£å˜› ğŸ˜ï¼Œä½†æ˜¯æœ€å¾Œé‚„æœ‰ä½†æ›¸ï¼Œç©ºé–“è¤‡é›œåº¦ O(1)ï¼Œæ™‚é–“è¤‡é›œåº¦ O(nÂ²) ğŸ˜±ï¼Œå› æ­¤è‹¥æƒ³ç”¨æš´åŠ›æ³•æ­é… .sort() éƒ½ä¸ç¬¦åˆé¡Œç›®çš„è¦ç¯„ã€‚

é€™æ™‚å€™å°±éœ€è¦ä½¿ç”¨å¿«æ…¢æŒ‡é‡äº†ï¼Œä»¥ä¸‹æ˜¯æ€è€ƒæ–¹å¼ï¼š

1. ä½¿ç”¨å…©å€‹è®Šæ•¸ `slow` `fast` ä¾†ä»£è¡¨æ…¢æŒ‡é‡(çƒé¾œ) åŠ å¿«æŒ‡é‡(å…”å­)ï¼Œä»–å€‘ä¸€é–‹å§‹æœƒåœ¨åŸé»ä¹Ÿå°±æ˜¯ `nums[0]`
2. ç„¶å¾Œè®“é¾œå…”é€Ÿåº¦ä¸åŒï¼Œå› æ­¤ `fast`æœƒç”¨å…©å±¤é™£åˆ—çš„æ–¹å¼ï¼Œä¾†å¯¦ä½œå…”å­èµ°å¾—æ¯”è¼ƒå¿«çš„ç‹€æ³
3. åˆ©ç”¨è¿´åœˆè®“é¾œå…”é‡è¤‡ #2 çš„å‹•ä½œï¼Œ**ç›´åˆ°** `**slow**` `**fast**`**ç›¸ç­‰(é¾œå…”ç›¸é‡)ï¼Œä»£è¡¨æœ‰ç’°å­˜åœ¨**
4. è®“`slow`é€€å›åŸé»`nums[0]`ï¼Œ`fast`ä¿æŒåœ¨åŸåœ°ä¸å‹•
5. ç„¶å¾Œå†æ¬¡åˆ©ç”¨è¿´åœˆè®“é¾œå…”é–‹å§‹è·‘ï¼Œ**ä½†é€™æ¬¡é¾œå…”çš„é€Ÿåº¦è¦æ˜¯ä¸€è‡´çš„ï¼Œå†æ¬¡ç›¸é‡æ™‚ï¼Œå°±æ˜¯ç’°çš„èµ·é»ï¼Œä¹Ÿä»£è¡¨é‡è¤‡çš„æ•¸å­—**

```javascript
var findDuplicate = function (nums) {
  let slow = nums[0];
  let fast = nums[0];

  slow = nums[slow];
  fast = nums[nums[fast]];

  // find meeting point
  while (slow !== fast) {
    slow = nums[slow];
    fast = nums[nums[fast]];
  }

  // find entry point of cycle
  slow = nums[0];
  while (slow !== fast) {
    slow = nums[slow]; // slow back to start point
    fast = nums[fast]; // fast stay at meeting point
  }
  return fast;
};
```

é€™å€‹æ–¹æ³•ä¹Ÿèƒ½æ‡‰ç”¨åœ¨ Linked List çš„é¡Œå‹ï¼Œå…ˆä¾†é¡Œç°¡å–®çš„ï¼š

### 141. Linked List Cycle

> Given a linked list, determine if it has a cycle in it.

> To represent a cycle in the given linked list, we use an integer `pos` which represents the position (0-indexed) in the linked list where the tail connects to. If `pos == -1`, then there is no cycle in the linked list.

> **Follow up:**

> Can you solve it using _O(1)_ (i.e. constant) memory?

**Example 1:**

![0_zfG8Tyew6vuExFyU](https://i.imgur.com/I2RQZcE.png)

```
Input: head = [3,2,0,-4], pos = 1
Output: true
Explanation: There is a cycle in the linked list, where tail connects to the second node.
```

é€™é¡Œå°ç©ºé–“è¤‡é›œåº¦æœ‰ç›¸åŒçš„è¦æ±‚ï¼Œå› æ­¤ä¹Ÿç›¸ç•¶é©åˆä½¿ç”¨å¿«æ…¢æŒ‡é‡ï¼ŒåŸºæœ¬ä¸Šé‚è¼¯ç›¸åŒï¼Œå°±ä¸å†è´…è¿°äº†ï¼Œå¦‚æœæœ‰å­¸é Linked List çš„äººå¯ä»¥é †ä¾¿ç·´ç¿’ä¸€ä¸‹ã€‚

```javascript
var hasCycle = function (head) {
  let fast = head;
  let slow = head;

  // check the cycle
  while (fast && fast.next) {
    fast = fast.next.next;
    slow = slow.next;
    // cycle exist
    if (fast === slow) return true;
  }
  // no cycle
  return false;
};
```

### 142. Linked List Cycle II

> Given a linked list, return the node where the cycle begins. If there is no cycle, return `null`.

> To represent a cycle in the given linked list, we use an integer `pos` which represents the position (0-indexed) in the linked list where tail connects to. If `pos` is `-1`, then there is no cycle in the linked list.

> **Note:** Do not modify the linked list.

**Example 1:**

```
Input: head = [3,2,0,-4], pos = 1
Output: tail connects to node index 1
Explanation: There is a cycle in the linked list, where tail connects to the second node.
```

![0_FHndGxUHRjw2FvcK](https://i.imgur.com/Rd1i1Pv.png)

```javascript
var detectCycle = function (head) {
  let fast = head;
  let slow = head;
  while (fast && fast.next) {
    fast = fast.next.next;
    slow = slow.next;
    if (fast === slow) {
      slow = head;
      while (fast !== slow) {
        fast = fast.next;
        slow = slow.next;
      }
      return slow;
    }
  }
  return null;
};
```

### Reference

1. [If Programming Was An Anime](https://www.youtube.com/watch?v=pKO9UjSeLew)
2. [åˆ¤åœˆç®—æ³•](https://blog.csdn.net/u011221820/article/details/78821464)
3. [æ‰¾å‡ºé‡è¤‡æ•¸å­—ï¼šFloyd Cycle Detection Algorithm é¾œå…”è³½è·‘æ¼”ç®—æ³•](https://medium.com/@chiafangsung/æ‰¾å‡ºé‡è¤‡æ•¸å­—-floyd-cycle-detection-algorithm-é¾œå…”è³½è·‘æ¼”ç®—æ³•-c7c2a0315f68)
4. [æ¢ç´¢ Floyd Cycle Detection Algorithm](https://medium.com/@orionssl/æ¢ç´¢-floyd-cycle-detection-algorithm-934cdd05beb9)
5. [[Wiki\] Cycle detection](https://en.wikipedia.org/wiki/Cycle_detection)
